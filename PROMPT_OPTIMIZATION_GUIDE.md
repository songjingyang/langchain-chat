# ✨ 提示词优化功能使用指南

## 📋 **功能概述**

LangChain Chat 现已集成智能提示词优化功能，帮助用户改善提示词的质量和效果。

### 🎯 **主要功能**
- ✨ **智能优化**：使用AI模型自动优化提示词
- 📊 **对比显示**：展示优化前后的差异
- 🎨 **改进分析**：详细说明优化改进点
- 🔄 **多模型支持**：支持OpenAI、Groq、Google等模型
- ⚡ **实时反馈**：显示优化进度和状态

## 🚀 **使用方法**

### 1. **基本使用流程**

1. **输入内容**：在聊天输入框中输入您的提示词
2. **点击优化**：点击输入框工具栏中的 ✨ 优化按钮
3. **等待处理**：系统会显示优化进度（通常需要5-15秒）
4. **查看结果**：优化完成后会显示对比界面
5. **应用优化**：确认后优化结果会自动填充到输入框

### 2. **优化按钮位置**

优化按钮位于聊天输入框的右侧工具栏中：
```
[输入框内容] | 😊 ✨ 📎 🎤 ⚙️ [发送]
              ↑
           优化按钮
```

### 3. **按钮状态说明**

- **✨ 蓝色**：可以优化（输入框有内容且长度适中）
- **✨ 灰色**：不可优化（输入框为空或内容过长）
- **🔄 旋转**：正在优化中
- **❌ 禁用**：系统正在处理其他请求

## 📝 **优化示例**

### 示例1：技术问题优化

**原始提示词：**
```
帮我写一个函数
```

**优化后提示词：**
```
请帮我编写一个JavaScript函数，具体要求如下：
- 函数功能：[请描述具体功能]
- 输入参数：[请说明参数类型和含义]
- 返回值：[请说明返回值类型和格式]
- 使用场景：[请描述使用环境]
- 代码风格：请使用ES6+语法，添加适当的注释
```

### 示例2：创作类问题优化

**原始提示词：**
```
写一篇文章
```

**优化后提示词：**
```
请帮我撰写一篇文章，具体要求如下：
- 主题：[请明确文章主题]
- 目标读者：[请说明目标受众]
- 文章长度：[请指定字数要求]
- 写作风格：[请说明语调和风格偏好]
- 结构要求：包含引言、主体段落和结论
- 特殊要求：[如需要引用数据、案例等请说明]
```

### 示例3：分析类问题优化

**原始提示词：**
```
分析这个问题
```

**优化后提示词：**
```
请对以下问题进行深入分析：
- 问题描述：[请详细描述具体问题]
- 分析角度：[请说明希望从哪些角度分析]
- 分析深度：[请说明需要多详细的分析]
- 输出格式：请按照问题背景、原因分析、影响评估、解决方案的结构组织
- 参考依据：[如需要特定理论或数据支持请说明]
```

## 🎯 **优化原则**

### 系统优化策略
1. **保持原意**：不改变用户的核心意图
2. **增加具体性**：添加必要的细节和上下文
3. **改善结构**：使逻辑更清晰
4. **精确表达**：使用更准确的词汇
5. **添加要求**：补充格式、风格等具体要求

### 优化改进类型
- 📝 **添加具体细节和上下文信息**
- 🏗️ **改善内容结构和逻辑层次**
- 🎯 **使用更精确和专业的表达方式**
- ❓ **明确问题的具体方向**
- ✨ **优化表达的清晰度和准确性**

## ⚙️ **技术配置**

### API配置
优化功能使用以下AI模型：
- **OpenAI**: GPT-3.5-turbo（默认）
- **Groq**: Llama3-8B-8192
- **Google**: Gemini-Pro

### 使用限制
- **最大长度**：2000字符
- **最小长度**：1字符
- **响应时间**：通常5-15秒
- **并发限制**：同时只能处理一个优化请求

### 错误处理
- **内容为空**：提示"请先输入内容再进行优化"
- **内容过长**：提示"内容过长，请控制在2000字符以内"
- **API错误**：提示"提示词优化服务暂时不可用，请稍后重试"
- **网络超时**：提示"AI服务响应超时，请稍后重试"

## 🔧 **故障排除**

### 常见问题

#### 1. **优化按钮不可点击**
- **原因**：输入框为空或内容超过2000字符
- **解决**：确保输入框有内容且长度适中

#### 2. **优化请求超时**
- **原因**：AI服务响应慢或网络问题
- **解决**：稍后重试，或检查网络连接

#### 3. **优化结果不理想**
- **原因**：原始提示词过于简单或模糊
- **解决**：提供更多上下文信息，然后再次优化

#### 4. **API密钥错误**
- **原因**：AI服务API密钥未配置或无效
- **解决**：检查环境变量配置

### 调试方法

#### 检查API状态
```bash
curl http://localhost:3001/api/optimize-prompt
```

#### 测试优化功能
```bash
curl -X POST http://localhost:3001/api/optimize-prompt \
  -H 'Content-Type: application/json' \
  -d '{"prompt":"测试提示词","provider":"openai"}'
```

## 💡 **使用技巧**

### 1. **提供上下文**
在原始提示词中包含一些背景信息，优化效果会更好：
```
❌ 写代码
✅ 帮我写一个处理用户登录的Python函数
```

### 2. **明确需求**
说明您希望得到什么样的回答：
```
❌ 解释这个概念
✅ 用简单易懂的语言解释机器学习的概念，适合初学者理解
```

### 3. **指定格式**
如果有特定的输出格式要求，可以在原始提示词中提及：
```
❌ 分析数据
✅ 分析销售数据并生成包含图表的报告
```

### 4. **迭代优化**
如果第一次优化结果不满意，可以基于优化结果再次优化：
```
第一次优化 → 查看结果 → 手动调整 → 再次优化
```

## 📊 **效果评估**

### 优化质量指标
- **具体性提升**：是否添加了更多具体细节
- **结构改善**：是否改善了逻辑结构
- **表达精确性**：是否使用了更准确的词汇
- **完整性**：是否补充了必要的要求和约束

### 使用建议
1. **适合优化的提示词**：
   - 过于简单或模糊的问题
   - 缺乏上下文的技术问题
   - 需要特定格式的创作请求

2. **不需要优化的提示词**：
   - 已经非常具体和详细的问题
   - 简单的事实性查询
   - 已经包含完整要求的复杂提示词

## 🎉 **总结**

提示词优化功能可以帮助您：
- 🎯 **提高AI回答质量**：更精确的提示词获得更好的回答
- ⏱️ **节省时间**：自动优化比手动修改更快
- 📚 **学习改进**：通过对比了解如何写出更好的提示词
- 🔄 **持续改进**：支持多次迭代优化

**开始使用：在输入框中输入您的问题，然后点击 ✨ 优化按钮体验智能提示词优化功能！**
